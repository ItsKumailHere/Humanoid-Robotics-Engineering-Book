# Content API Contract

This document defines the contract for the content API that will be available in the deployed textbook for future RAG integration and client applications.

## Base URL
`https://<your-book-domain>/api`

## Endpoints

### GET /chapters
Retrieve a list of all chapters in the textbook.

**Response:**
```
{
  "chapters": [
    {
      "id": "string",
      "title": "string",
      "summary": "string",
      "learning_objectives": ["string"],
      "sections": ["string"],
      "exercises_count": "number",
      "last_updated": "date"
    }
  ]
}
```

**Status Codes:**
- 200: Success
- 500: Server Error

### GET /chapters/{id}
Retrieve a specific chapter by its ID.

**Path Parameters:**
- id: The unique identifier of the chapter

**Response:**
```
{
  "id": "string",
  "title": "string",
  "learning_objectives": ["string"],
  "concepts": "string",
  "examples": ["example_object"],
  "code": ["code_block_object"],
  "diagrams": ["diagram_object"],
  "exercises": ["exercise_object"],
  "summary": "string",
  "references": ["reference_object"],
  "metadata": "object"
}
```

**Status Codes:**
- 200: Success
- 404: Chapter not found
- 500: Server Error

### GET /exercises
Retrieve a list of exercises with optional filtering.

**Query Parameters:**
- chapter_id (optional): Filter by chapter
- difficulty (optional): Filter by difficulty level (beginner, intermediate, advanced)

**Response:**
```
{
  "exercises": [
    {
      "id": "string",
      "chapter_id": "string",
      "content": "string",
      "difficulty": "string",
      "type": "string"
    }
  ]
}
```

**Status Codes:**
- 200: Success
- 500: Server Error

### GET /exercises/{id}
Retrieve a specific exercise by its ID.

**Path Parameters:**
- id: The unique identifier of the exercise

**Response:**
```
{
  "id": "string",
  "chapter_id": "string",
  "content": "string",
  "solution": "string",
  "difficulty": "string",
  "type": "string",
  "related_concepts": ["string"]
}
```

**Status Codes:**
- 200: Success
- 404: Exercise not found
- 500: Server Error

### POST /exercises/{id}/submit
Submit an answer to an exercise for validation.

**Path Parameters:**
- id: The unique identifier of the exercise

**Request Body:**
```
{
  "user_id": "string",
  "answer": "string",
  "timestamp": "date"
}
```

**Response:**
```
{
  "exercise_id": "string",
  "user_id": "string",
  "is_correct": "boolean",
  "feedback": "string",
  "timestamp": "date"
}
```

**Status Codes:**
- 200: Success
- 400: Invalid submission
- 404: Exercise not found
- 500: Server Error

## Common Error Response

```
{
  "error": {
    "code": "string",
    "message": "string"
  }
}
```

## Data Models

### Example Object
```
{
  "id": "string",
  "title": "string",
  "description": "string",
  "content": "string",
  "related_concepts": ["string"]
}
```

### Code Block Object
```
{
  "id": "string",
  "language": "string",
  "content": "string",
  "caption": "string",
  "validation": {
    "expected_output": "string",
    "test_cases": ["test_object"]
  }
}
```

### Diagram Object
```
{
  "id": "string",
  "title": "string",
  "description": "string",
  "alt_text": "string",
  "svg_content": "string",
  "related_concepts": ["string"]
}
```

### Reference Object
```
{
  "id": "string",
  "title": "string",
  "authors": ["string"],
  "publication": "string",
  "url": "string",
  "citation_type": "string",
  "access_date": "date"
}
```

## Authentication
The API endpoints are public for content retrieval. Exercise validation may require authentication as specified in future updates for personalized content.

## Rate Limiting
All endpoints are subject to rate limiting to ensure service availability. Current limits:
- 100 requests per minute per IP address
- 1000 requests per hour per IP address

## Versioning
This API contract is versioned. The current version is v1. All endpoints are prefixed with /api/v1.

## Error Handling
- 4xx errors indicate client-side issues
- 5xx errors indicate server-side issues
- All errors return structured JSON responses